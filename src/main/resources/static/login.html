<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login - Meal & Workout Buddy</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-slate-100 flex items-center justify-center">
<div class="bg-white shadow-lg rounded-xl p-8 w-full max-w-md">
    <h1 class="text-2xl font-bold mb-4 text-center">Meal & Workout Buddy</h1>
    <p class="text-sm text-gray-600 mb-6 text-center">
        Log in or create an account to get your personalized plans.
    </p>

    <div class="space-y-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" for="username">
                Username
            </label>
            <input id="username" type="text"
                   class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring focus:ring-blue-400">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" for="password">
                Password
            </label>
            <input id="password" type="password"
                   class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring focus:ring-blue-400">
        </div>

        <button id="loginBtn"
                class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition">
            Login / Register
        </button>

        <p id="message" class="text-sm text-center mt-2 text-red-600"></p>
    </div>
</div>

<script>
    const loginBtn = document.getElementById('loginBtn');
    const msg = document.getElementById('message');

    loginBtn.addEventListener('click', async () => {
        msg.textContent = '';

        const username = document.getElementById('username').value.trim();
        const password = document.getElementById('password').value.trim();

        if (!username || !password) {
            msg.textContent = 'Please enter username and password.';
            return;
        }

        try {
            const resp = await fetch('/api/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({username, password})
            });

            if (resp.ok) {
                // success: go to main app
                window.location.href = '/index.html';
            } else {
                const text = await resp.text();
                msg.textContent = text || 'Login failed.';
            }
        } catch (err) {
            msg.textContent = 'Error connecting to server.';
        }
    });
</script>
</body>
</html>
